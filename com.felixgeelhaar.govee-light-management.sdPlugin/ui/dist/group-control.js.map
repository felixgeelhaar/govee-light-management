{"version":3,"file":"group-control.js","sources":["../../../src/frontend/machines/groupManagementMachine.ts","../../../src/frontend/composables/useGroupManagement.ts","../../../src/frontend/views/GroupControlView.vue","../../../src/frontend/group-control.ts"],"sourcesContent":["import { setup, assign, fromPromise } from 'xstate'\r\nimport type { LightGroup, LightItem } from '@shared/types'\r\nimport { websocketService } from '../services/websocketService'\r\n\r\n/**\r\n * Context for the group management state machine\r\n */\r\nexport interface GroupManagementContext {\r\n  groups: LightGroup[]\r\n  currentGroup: LightGroup | null\r\n  availableLights: LightItem[]\r\n  selectedLights: string[]\r\n  error: string | null\r\n  isLoading: boolean\r\n}\r\n\r\n/**\r\n * Input for the group management machine\r\n */\r\nexport interface GroupManagementInput {\r\n  shouldFailSave?: boolean\r\n  shouldFailDelete?: boolean\r\n  shouldFailLoad?: boolean\r\n}\r\n\r\n/**\r\n * Events that can be sent to the group management machine\r\n */\r\nexport type GroupManagementEvent =\r\n  | { type: 'LOAD_GROUPS' }\r\n  | { type: 'CREATE_GROUP' }\r\n  | { type: 'EDIT_GROUP'; group: LightGroup }\r\n  | { type: 'SAVE_GROUP'; name: string; selectedLights: string[] }\r\n  | { type: 'DELETE_GROUP'; groupId: string }\r\n  | { type: 'CANCEL_EDIT' }\r\n  | { type: 'GROUPS_LOADED'; groups: LightGroup[] }\r\n  | { type: 'GROUP_SAVED'; group: LightGroup }\r\n  | { type: 'GROUP_DELETED'; groupId: string }\r\n  | { type: 'OPERATION_FAILED'; error: string }\r\n  | { type: 'SELECT_LIGHT'; lightId: string }\r\n  | { type: 'DESELECT_LIGHT'; lightId: string }\r\n\r\n/**\r\n * State machine for managing light groups\r\n * \r\n * States:\r\n * - idle: Initial state, groups not loaded\r\n * - loading: Loading groups from storage\r\n * - ready: Groups loaded, ready for operations\r\n * - editing: Creating or editing a group\r\n * - saving: Saving group changes\r\n * - deleting: Deleting a group\r\n * - error: Operation failed\r\n */\r\nexport const groupManagementMachine = setup({\r\n  types: {\r\n    context: {} as GroupManagementContext,\r\n    events: {} as GroupManagementEvent,\r\n    input: {} as GroupManagementInput,\r\n  },\r\n  actions: {\r\n    setGroups: assign({\r\n      groups: ({ event }) => {\r\n        if (event.type === 'GROUPS_LOADED') {\r\n          return event.groups\r\n        }\r\n        return []\r\n      },\r\n    }),\r\n    \r\n    setCurrentGroup: assign({\r\n      currentGroup: ({ event }) => {\r\n        if (event.type === 'EDIT_GROUP') {\r\n          return event.group\r\n        }\r\n        return null\r\n      },\r\n    }),\r\n    \r\n    clearCurrentGroup: assign({\r\n      currentGroup: null,\r\n      selectedLights: [],\r\n    }),\r\n    \r\n    selectLight: assign({\r\n      selectedLights: ({ context, event }) => {\r\n        if (event.type === 'SELECT_LIGHT') {\r\n          if (!context.selectedLights.includes(event.lightId)) {\r\n            return [...context.selectedLights, event.lightId]\r\n          }\r\n        }\r\n        return context.selectedLights\r\n      },\r\n    }),\r\n    \r\n    deselectLight: assign({\r\n      selectedLights: ({ context, event }) => {\r\n        if (event.type === 'DESELECT_LIGHT') {\r\n          return context.selectedLights.filter(id => id !== event.lightId)\r\n        }\r\n        return context.selectedLights\r\n      },\r\n    }),\r\n    \r\n    addOrUpdateGroup: assign({\r\n      groups: ({ context, event }) => {\r\n        if (event.type === 'GROUP_SAVED') {\r\n          const existingIndex = context.groups.findIndex(g => g.id === event.group.id)\r\n          if (existingIndex >= 0) {\r\n            // Update existing group\r\n            const newGroups = [...context.groups]\r\n            newGroups[existingIndex] = event.group\r\n            return newGroups\r\n          } else {\r\n            // Add new group\r\n            return [...context.groups, event.group]\r\n          }\r\n        }\r\n        return context.groups\r\n      },\r\n    }),\r\n    \r\n    removeGroup: assign({\r\n      groups: ({ context, event }) => {\r\n        if (event.type === 'GROUP_DELETED') {\r\n          return context.groups.filter(g => g.id !== event.groupId)\r\n        }\r\n        return context.groups\r\n      },\r\n    }),\r\n    \r\n    setError: assign({\r\n      error: ({ event }) => {\r\n        if (event.type === 'OPERATION_FAILED') {\r\n          return event.error\r\n        }\r\n        return null\r\n      },\r\n    }),\r\n    \r\n    clearError: assign({\r\n      error: null,\r\n    }),\r\n    \r\n    startLoading: assign({\r\n      isLoading: true,\r\n    }),\r\n    \r\n    stopLoading: assign({\r\n      isLoading: false,\r\n    }),\r\n  },\r\n  \r\n  actors: {\r\n    loadGroups: fromPromise(async ({ input }: { input: GroupManagementInput }) => {\r\n      // Production-ready WebSocket-based group loading\r\n      if (!websocketService.isConnected) {\r\n        throw new Error('WebSocket not connected to Stream Deck')\r\n      }\r\n      \r\n      return new Promise<LightGroup[]>((resolve, reject) => {\r\n        const timeout = setTimeout(() => {\r\n          websocketService.off('sendToPropertyInspector', responseHandler)\r\n          reject(new Error('Group loading timeout'))\r\n        }, 10000) // 10 second timeout\r\n        \r\n        const responseHandler = (message: any) => {\r\n          if (message.payload?.event === 'groupsReceived') {\r\n            clearTimeout(timeout)\r\n            websocketService.off('sendToPropertyInspector', responseHandler)\r\n            \r\n            if (message.payload.error) {\r\n              reject(new Error(message.payload.error))\r\n            } else {\r\n              resolve(message.payload.groups || [])\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Listen for response\r\n        websocketService.on('sendToPropertyInspector', responseHandler)\r\n        \r\n        // Send groups request\r\n        websocketService.requestGroups()\r\n      })\r\n    }),\r\n    \r\n    saveGroup: fromPromise(async ({ input }: { \r\n      input: GroupManagementInput & { \r\n        name: string\r\n        selectedLights: string[]\r\n        groupId?: string \r\n      } \r\n    }) => {\r\n      // Production-ready WebSocket-based group saving\r\n      if (!websocketService.isConnected) {\r\n        throw new Error('WebSocket not connected to Stream Deck')\r\n      }\r\n      \r\n      return new Promise<LightGroup>((resolve, reject) => {\r\n        const timeout = setTimeout(() => {\r\n          websocketService.off('sendToPropertyInspector', responseHandler)\r\n          reject(new Error('Group save timeout'))\r\n        }, 10000) // 10 second timeout\r\n        \r\n        const responseHandler = (message: any) => {\r\n          if (message.payload?.event === 'groupSaved') {\r\n            clearTimeout(timeout)\r\n            websocketService.off('sendToPropertyInspector', responseHandler)\r\n            \r\n            if (message.payload.error) {\r\n              reject(new Error(message.payload.error))\r\n            } else {\r\n              resolve(message.payload.group)\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Listen for response\r\n        websocketService.on('sendToPropertyInspector', responseHandler)\r\n        \r\n        // Send save request\r\n        websocketService.saveGroup({\r\n          name: input.name,\r\n          lightIds: input.selectedLights\r\n        })\r\n      })\r\n    }),\r\n    \r\n    deleteGroup: fromPromise(async ({ input }: { \r\n      input: GroupManagementInput & { groupId: string } \r\n    }) => {\r\n      // Production-ready WebSocket-based group deletion\r\n      if (!websocketService.isConnected) {\r\n        throw new Error('WebSocket not connected to Stream Deck')\r\n      }\r\n      \r\n      return new Promise<string>((resolve, reject) => {\r\n        const timeout = setTimeout(() => {\r\n          websocketService.off('sendToPropertyInspector', responseHandler)\r\n          reject(new Error('Group delete timeout'))\r\n        }, 10000) // 10 second timeout\r\n        \r\n        const responseHandler = (message: any) => {\r\n          if (message.payload?.event === 'groupDeleted') {\r\n            clearTimeout(timeout)\r\n            websocketService.off('sendToPropertyInspector', responseHandler)\r\n            \r\n            if (message.payload.error) {\r\n              reject(new Error(message.payload.error))\r\n            } else {\r\n              resolve(message.payload.groupId)\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Listen for response\r\n        websocketService.on('sendToPropertyInspector', responseHandler)\r\n        \r\n        // Send delete request\r\n        websocketService.deleteGroup(input.groupId)\r\n      })\r\n    }),\r\n  },\r\n}).createMachine({\r\n  id: 'groupManagement',\r\n  initial: 'idle',\r\n  context: ({ input }) => ({\r\n    groups: [],\r\n    currentGroup: null,\r\n    availableLights: [],\r\n    selectedLights: [],\r\n    error: null,\r\n    isLoading: false,\r\n  }),\r\n  \r\n  states: {\r\n    idle: {\r\n      on: {\r\n        LOAD_GROUPS: {\r\n          target: 'loading',\r\n        },\r\n      },\r\n    },\r\n    \r\n    loading: {\r\n      entry: ['startLoading', 'clearError'],\r\n      exit: 'stopLoading',\r\n      \r\n      invoke: {\r\n        src: 'loadGroups',\r\n        input: () => ({}),\r\n        onDone: {\r\n          target: 'ready',\r\n          actions: assign({\r\n            groups: ({ event }) => event.output,\r\n          }),\r\n        },\r\n        onError: {\r\n          target: 'error',\r\n          actions: assign({\r\n            error: ({ event }) => (event.error as Error)?.message || 'Unknown error',\r\n          }),\r\n        },\r\n      },\r\n      \r\n      on: {\r\n        GROUPS_LOADED: {\r\n          target: 'ready',\r\n          actions: 'setGroups',\r\n        },\r\n        OPERATION_FAILED: {\r\n          target: 'error',\r\n          actions: 'setError',\r\n        },\r\n      },\r\n    },\r\n    \r\n    ready: {\r\n      on: {\r\n        CREATE_GROUP: {\r\n          target: 'editing',\r\n          actions: 'clearCurrentGroup',\r\n        },\r\n        EDIT_GROUP: {\r\n          target: 'editing',\r\n          actions: ['setCurrentGroup', assign({\r\n            selectedLights: ({ event }) => \r\n              event.type === 'EDIT_GROUP' ? (event.group.lightIds || []) : []\r\n          })],\r\n        },\r\n        DELETE_GROUP: {\r\n          target: 'deleting',\r\n        },\r\n        LOAD_GROUPS: {\r\n          target: 'loading',\r\n        },\r\n      },\r\n    },\r\n    \r\n    editing: {\r\n      on: {\r\n        SAVE_GROUP: {\r\n          target: 'saving',\r\n        },\r\n        CANCEL_EDIT: {\r\n          target: 'ready',\r\n          actions: 'clearCurrentGroup',\r\n        },\r\n        SELECT_LIGHT: {\r\n          actions: 'selectLight',\r\n        },\r\n        DESELECT_LIGHT: {\r\n          actions: 'deselectLight',\r\n        },\r\n      },\r\n    },\r\n    \r\n    saving: {\r\n      entry: ['startLoading', 'clearError'],\r\n      exit: 'stopLoading',\r\n      \r\n      invoke: {\r\n        src: 'saveGroup',\r\n        input: ({ context, event, self }) => {\r\n          if (event.type === 'SAVE_GROUP') {\r\n            return {\r\n              name: event.name,\r\n              selectedLights: event.selectedLights,\r\n              groupId: context.currentGroup?.id,\r\n            }\r\n          }\r\n          return {\r\n            name: '',\r\n            selectedLights: []\r\n          }\r\n        },\r\n        onDone: {\r\n          target: 'ready',\r\n          actions: [\r\n            assign({\r\n              groups: ({ context, event }) => {\r\n                const savedGroup = event.output\r\n                const existingIndex = context.groups.findIndex(g => g.id === savedGroup.id)\r\n                if (existingIndex >= 0) {\r\n                  // Update existing group\r\n                  const newGroups = [...context.groups]\r\n                  newGroups[existingIndex] = savedGroup\r\n                  return newGroups\r\n                } else {\r\n                  // Add new group\r\n                  return [...context.groups, savedGroup]\r\n                }\r\n              },\r\n            }),\r\n            'clearCurrentGroup',\r\n          ],\r\n        },\r\n        onError: {\r\n          target: 'error',\r\n          actions: assign({\r\n            error: ({ event }) => (event.error as Error)?.message || 'Unknown error',\r\n          }),\r\n        },\r\n      },\r\n      \r\n      on: {\r\n        GROUP_SAVED: {\r\n          target: 'ready',\r\n          actions: ['addOrUpdateGroup', 'clearCurrentGroup'],\r\n        },\r\n        OPERATION_FAILED: {\r\n          target: 'error',\r\n          actions: 'setError',\r\n        },\r\n      },\r\n    },\r\n    \r\n    deleting: {\r\n      entry: ['startLoading', 'clearError'],\r\n      exit: 'stopLoading',\r\n      \r\n      invoke: {\r\n        src: 'deleteGroup',\r\n        input: ({ event, self }) => {\r\n          if (event.type === 'DELETE_GROUP') {\r\n            return {\r\n              groupId: event.groupId,\r\n            }\r\n          }\r\n          return {\r\n            groupId: ''\r\n          }\r\n        },\r\n        onDone: {\r\n          target: 'ready',\r\n          actions: assign({\r\n            groups: ({ context, event }) => \r\n              context.groups.filter(g => g.id !== event.output)\r\n          }),\r\n        },\r\n        onError: {\r\n          target: 'error',\r\n          actions: assign({\r\n            error: ({ event }) => (event.error as Error)?.message || 'Unknown error',\r\n          }),\r\n        },\r\n      },\r\n      \r\n      on: {\r\n        GROUP_DELETED: {\r\n          target: 'ready',\r\n          actions: 'removeGroup',\r\n        },\r\n        OPERATION_FAILED: {\r\n          target: 'error',\r\n          actions: 'setError',\r\n        },\r\n      },\r\n    },\r\n    \r\n    error: {\r\n      on: {\r\n        LOAD_GROUPS: {\r\n          target: 'loading',\r\n          actions: 'clearError',\r\n        },\r\n        CREATE_GROUP: {\r\n          target: 'editing',\r\n          actions: ['clearError', 'clearCurrentGroup'],\r\n        },\r\n      },\r\n    },\r\n  },\r\n})","import { ref, computed, onMounted, onUnmounted } from 'vue'\r\nimport { createActor, type ActorRefFrom } from 'xstate'\r\nimport { groupManagementMachine } from '../machines/groupManagementMachine'\r\nimport type { LightGroup, LightItem } from '@shared/types'\r\n\r\n/**\r\n * Vue composable for managing light groups state with XState\r\n */\r\nexport function useGroupManagement() {\r\n  // Create the XState actor\r\n  const actor = ref<ActorRefFrom<typeof groupManagementMachine> | null>(null)\r\n  \r\n  // Reactive state from the machine\r\n  const state = ref('idle')\r\n  const groups = ref<LightGroup[]>([])\r\n  const currentGroup = ref<LightGroup | null>(null)\r\n  const availableLights = ref<LightItem[]>([])\r\n  const selectedLights = ref<string[]>([])\r\n  const error = ref<string | null>(null)\r\n  const isLoading = ref(false)\r\n  \r\n  // Computed states for easier usage in templates\r\n  const isIdle = computed(() => state.value === 'idle')\r\n  const isLoadingGroups = computed(() => state.value === 'loading')\r\n  const isReady = computed(() => state.value === 'ready')\r\n  const isEditing = computed(() => state.value === 'editing')\r\n  const isSaving = computed(() => state.value === 'saving')\r\n  const isDeleting = computed(() => state.value === 'deleting')\r\n  const hasError = computed(() => state.value === 'error')\r\n  const hasGroups = computed(() => groups.value.length > 0)\r\n  const isCreatingNew = computed(() => isEditing.value && currentGroup.value === null)\r\n  const isEditingExisting = computed(() => isEditing.value && currentGroup.value !== null)\r\n  \r\n  // Initialize the actor and subscribe to state changes\r\n  onMounted(() => {\r\n    actor.value = createActor(groupManagementMachine, { input: {} })\r\n    \r\n    // Subscribe to state changes\r\n    actor.value.subscribe((snapshot) => {\r\n      state.value = snapshot.value as string\r\n      groups.value = snapshot.context.groups\r\n      currentGroup.value = snapshot.context.currentGroup\r\n      availableLights.value = snapshot.context.availableLights\r\n      selectedLights.value = snapshot.context.selectedLights\r\n      error.value = snapshot.context.error\r\n      isLoading.value = snapshot.context.isLoading\r\n    })\r\n    \r\n    actor.value.start()\r\n  })\r\n  \r\n  // Clean up on unmount\r\n  onUnmounted(() => {\r\n    if (actor.value) {\r\n      actor.value.stop()\r\n    }\r\n  })\r\n  \r\n  // Actions\r\n  const loadGroups = () => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'LOAD_GROUPS' })\r\n    }\r\n  }\r\n  \r\n  const createGroup = () => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'CREATE_GROUP' })\r\n    }\r\n  }\r\n  \r\n  const editGroup = (group: LightGroup) => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'EDIT_GROUP', group })\r\n    }\r\n  }\r\n  \r\n  const saveGroup = (name: string, lightIds: string[]) => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'SAVE_GROUP', name, selectedLights: lightIds })\r\n    }\r\n  }\r\n  \r\n  const deleteGroup = (groupId: string) => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'DELETE_GROUP', groupId })\r\n    }\r\n  }\r\n  \r\n  const cancelEdit = () => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'CANCEL_EDIT' })\r\n    }\r\n  }\r\n  \r\n  const selectLight = (lightId: string) => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'SELECT_LIGHT', lightId })\r\n    }\r\n  }\r\n  \r\n  const deselectLight = (lightId: string) => {\r\n    if (actor.value) {\r\n      actor.value.send({ type: 'DESELECT_LIGHT', lightId })\r\n    }\r\n  }\r\n  \r\n  const toggleLightSelection = (lightId: string) => {\r\n    if (selectedLights.value.includes(lightId)) {\r\n      deselectLight(lightId)\r\n    } else {\r\n      selectLight(lightId)\r\n    }\r\n  }\r\n  \r\n  const isLightSelected = (lightId: string) => {\r\n    return computed(() => selectedLights.value.includes(lightId))\r\n  }\r\n  \r\n  return {\r\n    // State\r\n    state: computed(() => state.value),\r\n    groups: computed(() => groups.value),\r\n    currentGroup: computed(() => currentGroup.value),\r\n    availableLights: computed(() => availableLights.value),\r\n    selectedLights: computed(() => selectedLights.value),\r\n    error: computed(() => error.value),\r\n    isLoading: computed(() => isLoading.value),\r\n    \r\n    // Computed convenience states\r\n    isIdle,\r\n    isLoadingGroups,\r\n    isReady,\r\n    isEditing,\r\n    isSaving,\r\n    isDeleting,\r\n    hasError,\r\n    hasGroups,\r\n    isCreatingNew,\r\n    isEditingExisting,\r\n    \r\n    // Actions\r\n    loadGroups,\r\n    createGroup,\r\n    editGroup,\r\n    saveGroup,\r\n    deleteGroup,\r\n    cancelEdit,\r\n    selectLight,\r\n    deselectLight,\r\n    toggleLightSelection,\r\n    isLightSelected,\r\n  }\r\n}","<template>\r\n  <div class=\"group-control-view\">\r\n    <!-- API Configuration Section -->\r\n    <section class=\"config-section\" data-testid=\"api-key-section\">\r\n      <h2>API Configuration</h2>\r\n      <div class=\"form-group\">\r\n        <label for=\"apiKey\">API Key</label>\r\n        <div class=\"input-group\">\r\n          <input\r\n            id=\"apiKey\"\r\n            v-model=\"localApiKey\"\r\n            type=\"password\"\r\n            class=\"form-input\"\r\n            placeholder=\"Enter your Govee API key\"\r\n            autocomplete=\"off\"\r\n            :disabled=\"apiConnection.isConnecting.value\"\r\n            @keyup.enter=\"connectToApi\"\r\n          />\r\n          <button\r\n            v-if=\"apiConnection.isDisconnected || apiConnection.hasError\"\r\n            class=\"btn btn-primary\"\r\n            :disabled=\"!localApiKey || apiConnection.isConnecting.value\"\r\n            @click=\"connectToApi\"\r\n          >\r\n            <span v-if=\"apiConnection.isConnecting\">Connecting...</span>\r\n            <span v-else>Connect</span>\r\n          </button>\r\n          <button\r\n            v-else-if=\"apiConnection.isConnected\"\r\n            class=\"btn btn-secondary\"\r\n            @click=\"apiConnection.disconnect\"\r\n          >\r\n            Disconnect\r\n          </button>\r\n        </div>\r\n        \r\n        <!-- Connection Status -->\r\n        <div v-if=\"apiConnection.isConnecting\" class=\"status-message status-loading\">\r\n          <span class=\"status-icon\">⏳</span>\r\n          Validating API key...\r\n        </div>\r\n        <div v-else-if=\"apiConnection.isConnected\" class=\"status-message status-success\">\r\n          <span class=\"status-icon\">✅</span>\r\n          API key validated successfully\r\n        </div>\r\n        <div v-else-if=\"apiConnection.hasError\" class=\"status-message status-error\">\r\n          <span class=\"status-icon\">❌</span>\r\n          {{ apiConnection.error }}\r\n          <button class=\"btn-link\" @click=\"apiConnection.retry\">Retry</button>\r\n        </div>\r\n        \r\n        <small class=\"help-text\">\r\n          Get your API key from the Govee Home app → Settings → About Us → Apply for API Key\r\n        </small>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Group Management Section -->\r\n    <section class=\"config-section\" data-testid=\"group-management-section\">\r\n      <h2>Group Management</h2>\r\n      \r\n      <!-- Loading Groups -->\r\n      <div v-if=\"groupManagement.isIdle\" class=\"form-group\">\r\n        <button\r\n          class=\"btn btn-primary\"\r\n          :disabled=\"!apiConnection.isConnected\"\r\n          @click=\"groupManagement.loadGroups\"\r\n        >\r\n          Load Groups\r\n        </button>\r\n        <small class=\"help-text\">\r\n          Connect your API key first, then load your light groups\r\n        </small>\r\n      </div>\r\n      \r\n      <!-- Loading State -->\r\n      <div v-else-if=\"groupManagement.isLoadingGroups\" class=\"status-message status-loading\">\r\n        <span class=\"status-icon\">⏳</span>\r\n        Loading groups...\r\n      </div>\r\n      \r\n      <!-- Error State -->\r\n      <div v-else-if=\"groupManagement.hasError\" class=\"status-message status-error\">\r\n        <span class=\"status-icon\">❌</span>\r\n        {{ groupManagement.error }}\r\n        <button class=\"btn-link\" @click=\"groupManagement.loadGroups\">Retry</button>\r\n      </div>\r\n      \r\n      <!-- Ready State - Group Selection -->\r\n      <div v-else-if=\"groupManagement.isReady\" class=\"form-group\">\r\n        <div class=\"form-group\">\r\n          <label for=\"groupSelect\">Light Group</label>\r\n          <select\r\n            id=\"groupSelect\"\r\n            v-model=\"selectedGroup\"\r\n            class=\"form-select\"\r\n            :disabled=\"!groupManagement.hasGroups\"\r\n          >\r\n            <option value=\"\" disabled>\r\n              {{ groupManagement.hasGroups ? 'Select a light group...' : 'No groups found' }}\r\n            </option>\r\n            <option\r\n              v-for=\"group in groupManagement.groups.value\"\r\n              :key=\"group.id\"\r\n              :value=\"group.id\"\r\n            >\r\n              {{ group.name }} ({{ group.lightIds?.length || 0 }} lights)\r\n            </option>\r\n          </select>\r\n        </div>\r\n\r\n        <div class=\"group-actions\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-secondary\"\r\n            :disabled=\"!selectedGroup || groupManagement.isLoading.value\"\r\n            @click=\"editGroup\"\r\n          >\r\n            ✏️ Edit\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-danger\"\r\n            :disabled=\"!selectedGroup || groupManagement.isLoading.value\"\r\n            @click=\"deleteGroup\"\r\n          >\r\n            <span v-if=\"groupManagement.isDeleting\">Deleting...</span>\r\n            <span v-else>🗑️ Delete</span>\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            :disabled=\"groupManagement.isLoading.value\"\r\n            @click=\"createNewGroup\"\r\n          >\r\n            + Create New Group\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Group Creation/Edit Form -->\r\n    <section\r\n      v-if=\"showCreateForm || showEditForm\"\r\n      class=\"config-section\"\r\n      data-testid=\"group-creation-form\"\r\n    >\r\n      <h2>{{ showEditForm ? 'Edit Group' : 'Create New Group' }}</h2>\r\n      \r\n      <!-- Saving State -->\r\n      <div v-if=\"groupManagement.isSaving\" class=\"status-message status-loading\">\r\n        <span class=\"status-icon\">⏳</span>\r\n        {{ showEditForm ? 'Updating group...' : 'Creating group...' }}\r\n      </div>\r\n      \r\n      <div v-else>\r\n        <div class=\"form-group\">\r\n          <label for=\"groupName\">Group Name</label>\r\n          <input\r\n            id=\"groupName\"\r\n            v-model=\"groupName\"\r\n            type=\"text\"\r\n            class=\"form-input\"\r\n            placeholder=\"Enter group name\"\r\n            :disabled=\"groupManagement.isLoading.value\"\r\n          />\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <label>Select Lights</label>\r\n          \r\n          <!-- Lights not loaded yet -->\r\n          <div v-if=\"lightDiscovery.isIdle\" class=\"status-message status-loading\">\r\n            <span class=\"status-icon\">⏳</span>\r\n            Loading available lights...\r\n          </div>\r\n          \r\n          <!-- Lights loading -->\r\n          <div v-else-if=\"lightDiscovery.isFetchingLights\" class=\"status-message status-loading\">\r\n            <span class=\"status-icon\">⏳</span>\r\n            Discovering lights...\r\n          </div>\r\n          \r\n          <!-- Light discovery error -->\r\n          <div v-else-if=\"lightDiscovery.hasError\" class=\"status-message status-error\">\r\n            <span class=\"status-icon\">❌</span>\r\n            {{ lightDiscovery.error }}\r\n            <button class=\"btn-link\" @click=\"lightDiscovery.retryFetch\">Retry</button>\r\n          </div>\r\n          \r\n          <!-- Light selection -->\r\n          <div v-else-if=\"lightDiscovery.isReady && lightDiscovery.hasLights\" class=\"light-selection\">\r\n            <div\r\n              v-for=\"light in lightDiscovery.lights.value\"\r\n              :key=\"light.value\"\r\n              class=\"light-checkbox\"\r\n            >\r\n              <input\r\n                :id=\"`light-${light.value}`\"\r\n                :checked=\"isLightSelected(light.value)\"\r\n                type=\"checkbox\"\r\n                class=\"checkbox\"\r\n                @change=\"toggleLightSelection(light.value)\"\r\n              />\r\n              <label :for=\"`light-${light.value}`\" class=\"checkbox-label\">\r\n                {{ light.label }}\r\n              </label>\r\n            </div>\r\n          </div>\r\n          \r\n          <!-- No lights found -->\r\n          <div v-else class=\"status-message status-error\">\r\n            <span class=\"status-icon\">ℹ️</span>\r\n            No lights available. Make sure your API key is connected and lights are discoverable.\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-actions\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-secondary\"\r\n            :disabled=\"groupManagement.isLoading.value\"\r\n            @click=\"cancelGroupForm\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btn-primary\"\r\n            :disabled=\"!groupName || selectedLights.length === 0 || groupManagement.isLoading.value\"\r\n            @click=\"saveGroup\"\r\n          >\r\n            {{ showEditForm ? 'Update Group' : 'Create Group' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n\r\n    <!-- Control Mode Section -->\r\n    <section class=\"config-section\" data-testid=\"control-mode-section\">\r\n      <h2>Control Mode</h2>\r\n      <div class=\"form-group\">\r\n        <label for=\"controlMode\">Control Mode</label>\r\n        <select\r\n          id=\"controlMode\"\r\n          v-model=\"controlMode\"\r\n          class=\"form-select\"\r\n        >\r\n          <option value=\"toggle\">Toggle On/Off</option>\r\n          <option value=\"on\">Turn On</option>\r\n          <option value=\"off\">Turn Off</option>\r\n          <option value=\"brightness\">Set Brightness</option>\r\n          <option value=\"color\">Set Color</option>\r\n          <option value=\"colorTemp\">Set Color Temperature</option>\r\n        </select>\r\n      </div>\r\n\r\n      <!-- Dynamic control inputs (same as LightControlView) -->\r\n      <div v-if=\"controlMode === 'brightness'\" class=\"form-group\">\r\n        <label for=\"brightness\">Brightness (%)</label>\r\n        <input\r\n          id=\"brightness\"\r\n          v-model.number=\"brightnessValue\"\r\n          type=\"range\"\r\n          min=\"1\"\r\n          max=\"100\"\r\n          class=\"form-range\"\r\n        />\r\n        <span class=\"range-value\">{{ brightnessValue }}%</span>\r\n      </div>\r\n\r\n      <div v-if=\"controlMode === 'color'\" class=\"form-group\">\r\n        <label for=\"color\">Color</label>\r\n        <input\r\n          id=\"color\"\r\n          v-model=\"colorValue\"\r\n          type=\"color\"\r\n          class=\"form-color\"\r\n        />\r\n      </div>\r\n\r\n      <div v-if=\"controlMode === 'colorTemp'\" class=\"form-group\">\r\n        <label for=\"colorTemp\">Color Temperature (K)</label>\r\n        <input\r\n          id=\"colorTemp\"\r\n          v-model.number=\"colorTempValue\"\r\n          type=\"range\"\r\n          min=\"2000\"\r\n          max=\"9000\"\r\n          step=\"100\"\r\n          class=\"form-range\"\r\n        />\r\n        <span class=\"range-value\">{{ colorTempValue }}K</span>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, computed, watch, onMounted } from 'vue'\r\nimport type { ControlMode, LightGroup } from '@shared/types'\r\nimport { useApiConnection } from '../composables/useApiConnection'\r\nimport { useLightDiscovery } from '../composables/useLightDiscovery'\r\nimport { useGroupManagement } from '../composables/useGroupManagement'\r\nimport { useGroupControlSettings } from '../composables/useSettings'\r\n\r\n// XState composables\r\nconst apiConnection = useApiConnection()\r\nconst lightDiscovery = useLightDiscovery()\r\nconst groupManagement = useGroupManagement()\r\n\r\n// Settings composable with persistence\r\nconst settingsManager = useGroupControlSettings()\r\n\r\n// Group form state\r\nconst groupName = ref<string>('')\r\n\r\n// Computed state helpers\r\nconst showCreateForm = computed(() => groupManagement.isCreatingNew.value)\r\nconst showEditForm = computed(() => groupManagement.isEditingExisting.value)\r\nconst selectedLights = computed(() => groupManagement.selectedLights.value)\r\n\r\n// Computed values bound to settings\r\nconst localApiKey = computed({\r\n  get: () => settingsManager.settings.apiKey || '',\r\n  set: (value: string) => settingsManager.updateSetting('apiKey', value || undefined)\r\n})\r\n\r\nconst selectedGroup = computed({\r\n  get: () => settingsManager.settings.selectedGroupId || '',\r\n  set: (value: string) => {\r\n    settingsManager.updateSetting('selectedGroupId', value || undefined)\r\n    \r\n    // Update group name in settings for display\r\n    if (value) {\r\n      const group = groupManagement.groups.value.find(g => g.id === value)\r\n      if (group) {\r\n        settingsManager.updateSetting('selectedGroupName', group.name)\r\n      }\r\n    } else {\r\n      settingsManager.updateSetting('selectedGroupName', undefined)\r\n    }\r\n  }\r\n})\r\n\r\nconst controlMode = computed({\r\n  get: () => settingsManager.settings.controlMode || 'toggle',\r\n  set: (value: ControlMode) => settingsManager.updateSetting('controlMode', value)\r\n})\r\n\r\nconst brightnessValue = computed({\r\n  get: () => settingsManager.settings.brightnessValue || 100,\r\n  set: (value: number) => settingsManager.updateSetting('brightnessValue', value)\r\n})\r\n\r\nconst colorValue = computed({\r\n  get: () => settingsManager.settings.colorValue || '#ffffff',\r\n  set: (value: string) => settingsManager.updateSetting('colorValue', value)\r\n})\r\n\r\nconst colorTempValue = computed({\r\n  get: () => settingsManager.settings.colorTempValue || 6500,\r\n  set: (value: number) => settingsManager.updateSetting('colorTempValue', value)\r\n})\r\n\r\n// Actions\r\nconst connectToApi = () => {\r\n  if (localApiKey.value) {\r\n    apiConnection.connect(localApiKey.value)\r\n  }\r\n}\r\n\r\nconst editGroup = () => {\r\n  const group = groupManagement.groups.value.find(g => g.id === selectedGroup.value)\r\n  if (group) {\r\n    groupManagement.editGroup(group)\r\n    groupName.value = group.name\r\n  }\r\n}\r\n\r\nconst deleteGroup = () => {\r\n  if (selectedGroup.value) {\r\n    const confirmDelete = confirm('Are you sure you want to delete this group?')\r\n    if (confirmDelete) {\r\n      groupManagement.deleteGroup(selectedGroup.value)\r\n      selectedGroup.value = ''\r\n    }\r\n  }\r\n}\r\n\r\nconst saveGroup = () => {\r\n  if (groupName.value && selectedLights.value.length > 0) {\r\n    groupManagement.saveGroup(groupName.value, selectedLights.value)\r\n    groupName.value = ''\r\n  }\r\n}\r\n\r\nconst cancelGroupForm = () => {\r\n  groupManagement.cancelEdit()\r\n  groupName.value = ''\r\n}\r\n\r\nconst createNewGroup = () => {\r\n  groupManagement.createGroup()\r\n  groupName.value = ''\r\n}\r\n\r\n// Light selection methods for form\r\nconst toggleLightSelection = (lightId: string) => {\r\n  groupManagement.toggleLightSelection(lightId)\r\n}\r\n\r\nconst isLightSelected = (lightId: string) => {\r\n  return groupManagement.isLightSelected(lightId).value\r\n}\r\n\r\n// Watch for API connection changes to load groups and lights\r\nwatch(\r\n  () => apiConnection.isConnected.value,\r\n  (isConnected) => {\r\n    if (isConnected) {\r\n      if (lightDiscovery.isIdle.value) {\r\n        lightDiscovery.fetchLights()\r\n      }\r\n      if (groupManagement.isIdle.value) {\r\n        groupManagement.loadGroups()\r\n      }\r\n    }\r\n  }\r\n)\r\n\r\n// Watch for API key changes in settings to update connection\r\nwatch(\r\n  () => settingsManager.settings.apiKey,\r\n  (newApiKey) => {\r\n    if (newApiKey && !apiConnection.isConnected.value) {\r\n      apiConnection.connect(newApiKey)\r\n    }\r\n  }\r\n)\r\n\r\n// Initialize on mount\r\nonMounted(() => {\r\n  // Enable auto-save with 500ms delay for responsive UI\r\n  settingsManager.enableAutoSave(500)\r\n  \r\n  // Load existing settings\r\n  settingsManager.loadSettings()\r\n  \r\n  // If we have an API key in settings, connect automatically\r\n  if (settingsManager.settings.apiKey) {\r\n    apiConnection.connect(settingsManager.settings.apiKey)\r\n  }\r\n  \r\n  // Load groups if already connected\r\n  if (apiConnection.isConnected.value) {\r\n    if (groupManagement.isIdle.value) {\r\n      groupManagement.loadGroups()\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.group-control-view {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 24px;\r\n}\r\n\r\n.config-section {\r\n  padding: 16px;\r\n  border: 1px solid var(--sdpi-color-border, #333);\r\n  border-radius: 8px;\r\n  background-color: var(--sdpi-color-bg-secondary, #2d2d30);\r\n}\r\n\r\n.config-section h2 {\r\n  margin: 0 0 16px 0;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  color: var(--sdpi-color-accent, #0099ff);\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.form-group:last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n.form-group label {\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  color: var(--sdpi-color-text, #cccccc);\r\n}\r\n\r\n.form-input,\r\n.form-select {\r\n  padding: 8px 12px;\r\n  border: 1px solid var(--sdpi-color-border, #333);\r\n  border-radius: 4px;\r\n  background-color: var(--sdpi-color-bg, #1e1e1e);\r\n  color: var(--sdpi-color-text, #cccccc);\r\n  font-size: 14px;\r\n}\r\n\r\n.form-input:focus,\r\n.form-select:focus {\r\n  outline: none;\r\n  border-color: var(--sdpi-color-accent, #0099ff);\r\n}\r\n\r\n.group-actions {\r\n  display: flex;\r\n  gap: 8px;\r\n  margin-top: 16px;\r\n}\r\n\r\n.btn {\r\n  padding: 8px 16px;\r\n  border: 1px solid transparent;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s ease;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.5;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: var(--sdpi-color-accent, #0099ff);\r\n  color: white;\r\n  border-color: var(--sdpi-color-accent, #0099ff);\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background-color: #0077cc;\r\n  border-color: #0077cc;\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: transparent;\r\n  color: var(--sdpi-color-text, #cccccc);\r\n  border-color: var(--sdpi-color-border, #333);\r\n}\r\n\r\n.btn-secondary:hover:not(:disabled) {\r\n  background-color: var(--sdpi-color-bg, #1e1e1e);\r\n}\r\n\r\n.btn-danger {\r\n  background-color: #dc3545;\r\n  color: white;\r\n  border-color: #dc3545;\r\n}\r\n\r\n.btn-danger:hover:not(:disabled) {\r\n  background-color: #c82333;\r\n  border-color: #c82333;\r\n}\r\n\r\n.light-selection {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n  padding: 8px;\r\n  border: 1px solid var(--sdpi-color-border, #333);\r\n  border-radius: 4px;\r\n  background-color: var(--sdpi-color-bg, #1e1e1e);\r\n}\r\n\r\n.light-checkbox {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.checkbox {\r\n  width: 16px;\r\n  height: 16px;\r\n}\r\n\r\n.checkbox-label {\r\n  font-size: 14px;\r\n  color: var(--sdpi-color-text, #cccccc);\r\n  cursor: pointer;\r\n}\r\n\r\n.form-actions {\r\n  display: flex;\r\n  gap: 8px;\r\n  justify-content: flex-end;\r\n  margin-top: 16px;\r\n}\r\n\r\n.form-range {\r\n  width: 100%;\r\n  margin: 8px 0;\r\n}\r\n\r\n.form-color {\r\n  width: 60px;\r\n  height: 40px;\r\n  border: 1px solid var(--sdpi-color-border, #333);\r\n  border-radius: 4px;\r\n  cursor: pointer;\r\n}\r\n\r\n.range-value {\r\n  font-size: 12px;\r\n  color: var(--sdpi-color-text-secondary, #999);\r\n  align-self: flex-end;\r\n}\r\n\r\n.help-text {\r\n  font-size: 12px;\r\n  color: var(--sdpi-color-text-secondary, #999);\r\n  line-height: 1.4;\r\n}\r\n\r\n/* Button Styles */\r\n.btn {\r\n  padding: 8px 16px;\r\n  border: none;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s ease;\r\n}\r\n\r\n.btn:disabled {\r\n  opacity: 0.6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.btn-primary {\r\n  background-color: var(--sdpi-color-accent, #0099ff);\r\n  color: white;\r\n}\r\n\r\n.btn-primary:hover:not(:disabled) {\r\n  background-color: var(--sdpi-color-accent-hover, #0077cc);\r\n}\r\n\r\n.btn-secondary {\r\n  background-color: var(--sdpi-color-bg-tertiary, #404040);\r\n  color: var(--sdpi-color-text, #cccccc);\r\n  border: 1px solid var(--sdpi-color-border, #333);\r\n}\r\n\r\n.btn-secondary:hover:not(:disabled) {\r\n  background-color: var(--sdpi-color-bg-hover, #505050);\r\n}\r\n\r\n.btn-link {\r\n  background: none;\r\n  border: none;\r\n  color: var(--sdpi-color-accent, #0099ff);\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  text-decoration: underline;\r\n  padding: 0;\r\n  margin-left: 8px;\r\n}\r\n\r\n.btn-link:hover {\r\n  color: var(--sdpi-color-accent-hover, #0077cc);\r\n}\r\n\r\n/* Input Group */\r\n.input-group {\r\n  display: flex;\r\n  gap: 8px;\r\n  align-items: center;\r\n}\r\n\r\n.input-group .form-input {\r\n  flex: 1;\r\n}\r\n\r\n/* Status Messages */\r\n.status-message {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  border-radius: 4px;\r\n  font-size: 14px;\r\n  margin: 8px 0;\r\n}\r\n\r\n.status-loading {\r\n  background-color: var(--sdpi-color-bg-info, #1a3b5c);\r\n  color: var(--sdpi-color-text-info, #79c7ff);\r\n  border: 1px solid var(--sdpi-color-border-info, #0099ff);\r\n}\r\n\r\n.status-success {\r\n  background-color: var(--sdpi-color-bg-success, #1a3b1a);\r\n  color: var(--sdpi-color-text-success, #7dd87d);\r\n  border: 1px solid var(--sdpi-color-border-success, #28a745);\r\n}\r\n\r\n.status-error {\r\n  background-color: var(--sdpi-color-bg-error, #3b1a1a);\r\n  color: var(--sdpi-color-text-error, #ff7979);\r\n  border: 1px solid var(--sdpi-color-border-error, #dc3545);\r\n}\r\n\r\n.status-icon {\r\n  font-size: 16px;\r\n  flex-shrink: 0;\r\n}\r\n</style>","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\nimport GroupControlView from './views/GroupControlView.vue'\r\nimport { initializePropertyInspector } from './utils/propertyInspectorInit'\r\n\r\n// Initialize Property Inspector WebSocket connection\r\ninitializePropertyInspector()\r\n\r\n// Create and mount the Vue application for Group Control Property Inspector\r\nconst app = createApp(App)\r\n\r\n// Add the group control view as the main content\r\napp.component('main-view', GroupControlView)\r\n\r\n// Mount the app with the specific view\r\napp.mount('#app')"],"names":["groupManagementMachine","setup","assign","event","context","id","existingIndex","g","newGroups","fromPromise","input","websocketService","resolve","reject","timeout","responseHandler","message","self","savedGroup","useGroupManagement","actor","ref","state","groups","currentGroup","availableLights","selectedLights","error","isLoading","isIdle","computed","isLoadingGroups","isReady","isEditing","isSaving","isDeleting","hasError","hasGroups","isCreatingNew","isEditingExisting","onMounted","createActor","snapshot","onUnmounted","loadGroups","createGroup","editGroup","group","saveGroup","name","lightIds","deleteGroup","groupId","cancelEdit","selectLight","lightId","deselectLight","toggleLightSelection","isLightSelected","apiConnection","useApiConnection","lightDiscovery","useLightDiscovery","groupManagement","settingsManager","useGroupControlSettings","groupName","showCreateForm","showEditForm","localApiKey","value","selectedGroup","controlMode","brightnessValue","colorValue","colorTempValue","connectToApi","cancelGroupForm","createNewGroup","watch","isConnected","newApiKey","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_cache","_hoisted_3","_hoisted_4","$event","_unref","args","_hoisted_9","_hoisted_10","_hoisted_11","_createTextVNode","_toDisplayString","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20","_Fragment","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","light","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","initializePropertyInspector","app","createApp","App","GroupControlView"],"mappings":"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"}