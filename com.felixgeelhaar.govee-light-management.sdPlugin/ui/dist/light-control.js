import{d as T,u as S,a as I,r as u,w as K,c as w,b as n,o as i,e as s,f as d,g as p,v as m,h as x,i as t,j as y,t as v,k as V,F as D,l as F,m as M,_ as P,n as U,A as N}from"./useLightDiscovery.js";const B={class:"light-control-view"},E={class:"config-section","data-testid":"api-key-section"},R={class:"form-group"},O={class:"input-group"},G=["disabled"],j=["disabled"],H={key:0},Q={key:1},$={key:0,class:"status-message status-loading"},q={key:1,class:"status-message status-success"},z={key:2,class:"status-message status-error"},J={class:"config-section","data-testid":"light-selection-section"},W={key:0,class:"form-group"},X=["disabled"],Y={key:1,class:"status-message status-loading"},Z={key:2,class:"status-message status-error"},ee={key:3,class:"form-group"},se={key:0,class:"search-group"},te={class:"form-group"},oe=["disabled"],le={value:"",disabled:""},ne=["value"],ie=["disabled"],ae={key:0},re={key:1},de={class:"config-section","data-testid":"control-mode-section"},ue={class:"form-group"},pe={key:0,class:"form-group"},ce={class:"range-value"},ve={key:1,class:"form-group"},ge={key:2,class:"form-group"},fe={class:"range-value"},me=T({__name:"LightControlView",setup(he){const a=S(),l=I(),g=u(""),c=u(""),r=u("toggle"),h=u(100),C=u("#ffffff"),b=u(6500),f=u(""),L=()=>{g.value&&a.connect(g.value)},A=()=>{f.value="",l.clearSearch()};return K(()=>a.isConnected.value,k=>{k&&l.isIdle.value&&l.fetchLights()}),w(()=>({apiKey:a.apiKey.value||void 0,selectedDeviceId:c.value.split("|")[0]||void 0,selectedModel:c.value.split("|")[1]||void 0,selectedLightName:c.value?l.filteredLights.value.find(k=>k.value===c.value)?.label:void 0,controlMode:r.value,brightnessValue:r.value==="brightness"?h.value:void 0,colorValue:r.value==="color"?C.value:void 0,colorTempValue:r.value==="colorTemp"?b.value:void 0})),(k,e)=>(i(),n("div",B,[s("section",E,[e[18]||(e[18]=s("h2",null,"API Configuration",-1)),s("div",R,[e[16]||(e[16]=s("label",{for:"apiKey"},"API Key",-1)),s("div",O,[p(s("input",{id:"apiKey","onUpdate:modelValue":e[0]||(e[0]=o=>g.value=o),type:"password",class:"form-input",placeholder:"Enter your Govee API key",autocomplete:"off",disabled:t(a).isConnecting,onKeyup:x(L,["enter"])},null,40,G),[[m,g.value]]),t(a).isDisconnected||t(a).hasError?(i(),n("button",{key:0,class:"btn btn-primary",disabled:!g.value||t(a).isConnecting,onClick:L},[t(a).isConnecting?(i(),n("span",H,"Connecting...")):(i(),n("span",Q,"Connect"))],8,j)):t(a).isConnected?(i(),n("button",{key:1,class:"btn btn-secondary",onClick:e[1]||(e[1]=(...o)=>t(a).disconnect&&t(a).disconnect(...o))}," Disconnect ")):d("",!0)]),t(a).isConnecting?(i(),n("div",$,e[13]||(e[13]=[s("span",{class:"status-icon"},"⏳",-1),y(" Validating API key... ",-1)]))):t(a).isConnected?(i(),n("div",q,e[14]||(e[14]=[s("span",{class:"status-icon"},"✅",-1),y(" API key validated successfully ",-1)]))):t(a).hasError?(i(),n("div",z,[e[15]||(e[15]=s("span",{class:"status-icon"},"❌",-1)),y(" "+v(t(a).error)+" ",1),s("button",{class:"btn-link",onClick:e[2]||(e[2]=(...o)=>t(a).retry&&t(a).retry(...o))},"Retry")])):d("",!0),e[17]||(e[17]=s("small",{class:"help-text"}," Get your API key from the Govee Home app → Settings → About Us → Apply for API Key ",-1))])]),s("section",J,[e[23]||(e[23]=s("h2",null,"Light Selection",-1)),t(l).isIdle?(i(),n("div",W,[s("button",{class:"btn btn-primary",disabled:!t(a).isConnected,onClick:e[3]||(e[3]=(...o)=>t(l).fetchLights&&t(l).fetchLights(...o))}," Discover Lights ",8,X),e[19]||(e[19]=s("small",{class:"help-text"}," Connect your API key first, then discover available lights ",-1))])):t(l).isFetchingLights?(i(),n("div",Y,e[20]||(e[20]=[s("span",{class:"status-icon"},"⏳",-1),y(" Discovering lights... ",-1)]))):t(l).hasError?(i(),n("div",Z,[e[21]||(e[21]=s("span",{class:"status-icon"},"❌",-1)),y(" "+v(t(l).error)+" ",1),s("button",{class:"btn-link",onClick:e[4]||(e[4]=(...o)=>t(l).retryFetch&&t(l).retryFetch(...o))},"Retry")])):t(l).isReady?(i(),n("div",ee,[t(l).hasLights?(i(),n("div",se,[p(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>f.value=o),type:"text",class:"form-input",placeholder:"Search lights...",onInput:e[6]||(e[6]=o=>t(l).searchLights(f.value))},null,544),[[m,f.value]]),f.value?(i(),n("button",{key:0,class:"btn-clear",onClick:A}," ✕ ")):d("",!0)])):d("",!0),s("div",te,[e[22]||(e[22]=s("label",{for:"lightSelect"},"Light",-1)),p(s("select",{id:"lightSelect","onUpdate:modelValue":e[7]||(e[7]=o=>c.value=o),class:"form-select",disabled:!t(l).hasFilteredLights},[s("option",le,v(t(l).hasFilteredLights?"Select a light...":"No lights found"),1),(i(!0),n(D,null,F(t(l).filteredLights,o=>(i(),n("option",{key:o.value,value:o.value},v(o.label),9,ne))),128))],8,oe),[[V,c.value]])]),s("button",{class:"btn btn-secondary",onClick:e[8]||(e[8]=(...o)=>t(l).refreshLights&&t(l).refreshLights(...o)),disabled:t(l).isFetchingLights},[t(l).isFetchingLights?(i(),n("span",ae,"Refreshing...")):(i(),n("span",re,"Refresh Lights"))],8,ie)])):d("",!0)]),s("section",de,[e[29]||(e[29]=s("h2",null,"Control Mode",-1)),s("div",ue,[e[25]||(e[25]=s("label",{for:"controlMode"},"Control Mode",-1)),p(s("select",{id:"controlMode","onUpdate:modelValue":e[9]||(e[9]=o=>r.value=o),class:"form-select"},e[24]||(e[24]=[M('<option value="toggle" data-v-62905e2f>Toggle On/Off</option><option value="on" data-v-62905e2f>Turn On</option><option value="off" data-v-62905e2f>Turn Off</option><option value="brightness" data-v-62905e2f>Set Brightness</option><option value="color" data-v-62905e2f>Set Color</option><option value="colorTemp" data-v-62905e2f>Set Color Temperature</option>',6)]),512),[[V,r.value]])]),r.value==="brightness"?(i(),n("div",pe,[e[26]||(e[26]=s("label",{for:"brightness"},"Brightness (%)",-1)),p(s("input",{id:"brightness","onUpdate:modelValue":e[10]||(e[10]=o=>h.value=o),type:"range",min:"1",max:"100",class:"form-range"},null,512),[[m,h.value,void 0,{number:!0}]]),s("span",ce,v(h.value)+"%",1)])):d("",!0),r.value==="color"?(i(),n("div",ve,[e[27]||(e[27]=s("label",{for:"color"},"Color",-1)),p(s("input",{id:"color","onUpdate:modelValue":e[11]||(e[11]=o=>C.value=o),type:"color",class:"form-color"},null,512),[[m,C.value]])])):d("",!0),r.value==="colorTemp"?(i(),n("div",ge,[e[28]||(e[28]=s("label",{for:"colorTemp"},"Color Temperature (K)",-1)),p(s("input",{id:"colorTemp","onUpdate:modelValue":e[12]||(e[12]=o=>b.value=o),type:"range",min:"2000",max:"9000",step:"100",class:"form-range"},null,512),[[m,b.value,void 0,{number:!0}]]),s("span",fe,v(b.value)+"K",1)])):d("",!0)])]))}}),ye=P(me,[["__scopeId","data-v-62905e2f"]]),_=U(N);_.mount("#app");_.component("main-view",ye);
//# sourceMappingURL=light-control.js.map
